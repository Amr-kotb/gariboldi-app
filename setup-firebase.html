<!DOCTYPE html>
<html>
<head>
    <title>Setup Firebase</title>
</head>
<body>
    <h1>Configura Utenti Firebase</h1>
    <button onclick="createUsers()">Crea Utenti Demo in Firebase</button>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    
    <script>
        async function createUsers() {
            const users = [
                {
                    email: 'andrea@gariboldi.com',
                    password: 'andrea.gariboldi!',
                    displayName: 'Andrea',
                    role: 'admin'
                },
                {
                    email: 'leonardo@gariboldi.com',
                    password: 'leonardo.gariboldi!',
                    displayName: 'Leonardo',
                    role: 'employee'
                },
                {
                    email: 'domenico@gariboldi.com',
                    password: 'domenico.gariboldi!',
                    displayName: 'Domenico',
                    role: 'employee'
                },
                {
                    email: 'stefano@gariboldi.com',
                    password: 'stefano.gariboldi!',
                    displayName: 'Stefano',
                    role: 'employee'
                }
            ];
            
            for (const userData of users) {
                try {
                    // Crea utente in Auth
                    const userCredential = await firebase.auth()
                        .createUserWithEmailAndPassword(userData.email, userData.password);
                    
                    // Salva in Firestore
                    await db.collection('users').doc(userCredential.user.uid).set({
                        email: userData.email,
                        displayName: userData.displayName,
                        role: userData.role,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    console.log('Creato:', userData.email);
                } catch (error) {
                    console.error('Errore creazione', userData.email, ':', error.message);
                }
            }
            
            alert('Utenti creati! Ora puoi accedere con le credenziali.');
        }
    </script>
</body>
</html>